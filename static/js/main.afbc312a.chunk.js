(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{117:function(t,e,a){t.exports={input:"EditableSpan_input__3c1_L",span:"EditableSpan_span__1cdp9"}},119:function(t,e,a){t.exports={message:"ErrorSnackbar_message__38d7O"}},135:function(t,e,a){},196:function(t,e,a){"use strict";a.r(e);var n,c,o=a(0),s=a.n(o),i=a(11),r=a.n(i),d=(a(135),a(79)),l=a(110),u=a(77),b=a(28),j=a(9),O=a(111),p=a.n(O).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"b108fd33-d977-4add-bda9-9da2037bdf7a"}}),f=function(){return p.get("todo-lists")},T=function(t){return p.post("todo-lists",{title:t})},h=function(t){return p.delete("todo-lists/".concat(t))},y=function(t,e){return p.put("todo-lists/".concat(t),{title:e})},_=function(t){return p.get("todo-lists/".concat(t,"/tasks"))},m=function(t,e){return p.post("todo-lists/".concat(t,"/tasks"),{title:e})},k=function(t,e){return p.delete("todo-lists/".concat(t,"/tasks/").concat(e))},S=function(t,e,a){return p.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var v={status:"idle",error:null},x=function(t){return{type:"APP/SET-STATUS",payload:{status:t}}},g=function(t){return{type:"APP/SET-ERROR",payload:{error:t}}},I=function(t,e){t.messages.length?e(g(t.messages[0])):e(g("Some error occurred")),e(x("failed"))},C=function(t,e){e(g(t.message)),e(x("failed"))},A={},E=function(t,e,a){return function(n,c){var o=c().tasks[a].find((function(e){return e.id===t}));if(o){var s=Object(j.a)({title:o.title,startDate:o.startDate,priority:o.priority,description:o.description,deadline:o.deadline,status:o.status},e);S(a,t,s).then((function(c){0==c.data.resultCode?n(function(t,e,a){return{type:"UPDATE_TASK",payload:{todolistId:a,taskId:t,model:e}}}(t,e,a)):I(c.data,n)})).catch((function(t){C(t,n)}))}}},L=a(241),D=(Object(L.a)(),Object(L.a)(),[]),N=Object(d.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,e.payload.tasks));case"SET_TODOLISTS":var a=Object(j.a)({},t);return e.payload.todos.forEach((function(t){a[t.id]=[]})),a;case"ADD_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(u.a)(t[e.payload.task.todoListId]))));case"REMOVE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todoListId,t[e.payload.todoListId].filter((function(t){return t.id!==e.payload.taskId}))));case"TASK/CHANGE_ENTITY_STATUS":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}))));case"UPDATE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(j.a)(Object(j.a)({},t),e.payload.model):t}))));case"ADD_TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(j.a)({},t);return delete n[e.payload.todoListId],n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{filter:e.payload.value}):t}));case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todoListId}));case"ADD_TODOLIST":return[Object(j.a)(Object(j.a)({},e.payload.todolist),{},{filter:"All",entityStatus:"idle"})].concat(Object(u.a)(t));case"UPDATE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{title:e.payload.title}):t}));case"SET_TODOLISTS":return e.payload.todos.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"All",entityStatus:"idle"})}));case"TODOLIST/CHANGE_ENTITY_STATUS":return t.map((function(t){return t.id===e.payload.id?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(j.a)(Object(j.a)({},t),{},{status:e.payload.status});case"APP/SET-ERROR":return Object(j.a)(Object(j.a)({},t),{},{error:e.payload.error});default:return Object(j.a)({},t)}}}),w=Object(d.c)(N,Object(d.a)(l.a));window.store=w;var P=a(19),R=a(78),U=a.n(R),K=a(233),F=a(234),M=a(235),H=a(236),W=a(107),G=a(120),V=a.n(G),B=a(238),Y=a(237),Q=a(232),q=a(200),J=a(46),X=a(54),z=a.n(X),Z=a(239),$=a(74),tt=a.n($),et=a(230),at=a(5),nt=s.a.memo((function(t){var e=t.callback,a=t.disabled,n=Object(o.useState)(""),c=Object(J.a)(n,2),s=c[0],i=c[1],r=Object(o.useState)(!1),d=Object(J.a)(r,2),l=d[0],u=d[1],b=function(){""!==s.trim()?(e(s.trim()),i("")):u(!0)};return Object(at.jsxs)("div",{className:z.a.wrapper,children:[Object(at.jsx)(Z.a,{className:z.a.textField,variant:"outlined",error:l,value:s,onChange:function(t){i(t.currentTarget.value),u(!1)},onKeyPress:function(t){l&&u(!1),"Enter"===t.key&&b()},label:"Title",helperText:l,disabled:a}),Object(at.jsx)(tt.a,{color:"primary",className:z.a.btnAdd,onClick:b,disabled:a,children:Object(at.jsx)(et.a,{})}),l&&Object(at.jsx)("span",{className:l?z.a.errorMessage:"",children:'"Title is required!"'})]})})),ct=a(36),ot=a.n(ct),st=a(117),it=a.n(st),rt=s.a.memo((function(t){var e=t.title,a=t.changeTaskTitle,n=t.className,c=t.disabled,s=Object(o.useState)(!1),i=Object(J.a)(s,2),r=i[0],d=i[1],l=Object(o.useState)(e),u=Object(J.a)(l,2),b=u[0],j=u[1];return r?Object(at.jsx)(Z.a,{className:it.a.input,autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;b&&a(e),j(e)},onBlur:function(){d(!1)},value:b,onKeyPress:function(t){"Enter"===t.key&&d(!1)},disabled:c}):Object(at.jsx)("span",{className:n,onDoubleClick:function(){d(!0)},children:e})})),dt=a(55),lt=a.n(dt),ut=a(118),bt=a.n(ut),jt=a(231),Ot=s.a.memo((function(t){var e=t.removeTask,a=t.checkboxChange,c=t.changeTaskTitle,s=t.task,i=t.todolistId,r=t.entityStatus,d=Object(o.useCallback)((function(t){c(s.id,t,i)}),[c,s.id,i]);return Object(at.jsx)("li",{className:s.status===n.Completed?lt.a.isDone:"",children:Object(at.jsxs)("div",{className:lt.a.wrapper,children:[Object(at.jsx)(bt.a,{checked:s.status===n.Completed,onChange:function(t){a(s.id,t.currentTarget.checked?n.Completed:n.New,i)}}),Object(at.jsx)(rt,{className:lt.a.span,changeTaskTitle:d,title:s.title,disabled:"loading"===r}),Object(at.jsx)(tt.a,{className:lt.a.trash,onClick:function(){e(s.id,i)},children:Object(at.jsx)(jt.a,{})})]})})})),pt=a(56),ft=a.n(pt),Tt=s.a.memo((function(t){var e=t.title,a=t.tasks,c=t.removeTask,s=t.changeFilter,i=t.addTask,r=t.checkboxChange,d=t.filter,l=t.id,u=t.removeTodoList,b=t.changeTaskTitle,j=t.changeTodoListTitle,O=t.entityStatus,p=Object(P.b)(),f=Object(o.useCallback)((function(){return s("All",l)}),[s,l]),T=Object(o.useCallback)((function(){return s("Active",l)}),[s,l]),h=Object(o.useCallback)((function(){return s("Completed",l)}),[s,l]),y=Object(o.useCallback)((function(t){i(t,l)}),[i,l]),m=Object(o.useCallback)((function(t){j(l,t)}),[j,l]),k=a;return"Completed"===d&&(k=a.filter((function(t){return t.status===n.Completed}))),"Active"===d&&(k=a.filter((function(t){return t.status===n.New}))),Object(o.useEffect)((function(){var t;p((t=l,function(e){e(x("loading")),_(t).then((function(a){e(x("succeeded"));var n=a.data.items;e(function(t,e){return{type:"SET_TASKS",payload:{tasks:t,todolistId:e}}}(n,t))}))}))}),[]),Object(at.jsxs)("div",{children:[Object(at.jsx)("h3",{children:Object(at.jsx)(rt,{className:ot.a.span,title:e,changeTaskTitle:m,disabled:"loading"===O})}),Object(at.jsx)(nt,{callback:y,disabled:"loading"===O}),Object(at.jsx)("div",{children:k.map((function(t){return Object(at.jsx)(Ot,{entityStatus:t.entityStatus,changeTaskTitle:b,removeTask:c,checkboxChange:r,task:t,todolistId:l},t.id)}))}),Object(at.jsxs)("div",{className:ot.a.btnsWrapper,children:[Object(at.jsx)(ft.a,{className:ot.a.btn,variant:"All"===d?"contained":"text",onClick:f,color:"secondary",children:"All"}),Object(at.jsx)(ft.a,{className:ot.a.btn,variant:"Active"===d?"contained":"text",onClick:T,color:"secondary",children:"Active"}),Object(at.jsx)(ft.a,{className:ot.a.btn,variant:"Completed"===d?"contained":"text",onClick:h,color:"secondary",children:"Completed"}),Object(at.jsx)(ft.a,{className:ot.a.deleteBtn,disabled:"loading"===O,onClick:function(){return u(l)},children:"Remove all"})]})]})})),ht=a(90),yt=a.n(ht),_t=function(){var t=Object(P.b)(),e=Object(P.c)((function(t){return t.tasks})),a=Object(P.c)((function(t){return t.todolists})),n=Object(o.useCallback)((function(e,a){var n=function(t,e){return{type:"CHANGE_FILTER",payload:{value:t,todolistId:e}}}(e,a);t(n)}),[t]),c=Object(o.useCallback)((function(e){var a;t((a=e,function(t){t(x("loading")),t({type:"TODOLIST/CHANGE_ENTITY_STATUS",payload:{id:a,entityStatus:"loading"}}),h(a).then((function(e){0===e.data.resultCode?(t(x("succeeded")),t({type:"REMOVE_TODOLIST",payload:{todoListId:a}})):I(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),s=Object(o.useCallback)((function(e){t(function(t){return function(e){e(x("loading")),T(t).then((function(t){0==t.data.resultCode?(e({type:"ADD_TODOLIST",payload:{todolist:t.data.data.item}}),e(x("succeeded"))):I(t.data,e)})).catch((function(t){C(t,e)}))}}(e))}),[t]);Object(o.useEffect)((function(){t((function(t){t(x("loading")),f().then((function(e){t(x("succeeded")),t({type:"SET_TODOLISTS",payload:{todos:e.data}})})).catch((function(e){C(e,t)}))}))}),[]);var i=Object(o.useCallback)((function(e,a){t(function(t,e){return function(a){y(t,e).then((function(n){0==n.data.resultCode?a(function(t,e){return{type:"UPDATE_TODOLIST_TITLE",payload:{todolistId:t,title:e}}}(t,e)):I(n.data,a)})).catch((function(t){C(t,a)}))}}(e,a))}),[t]),r=Object(o.useCallback)((function(e,a){t(function(t,e){return function(a){a(x("loading")),m(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD_TASK",payload:{task:t}}}(e)),a(x("succeeded"))}else I(t.data,a)})).catch((function(t){C(t,a)}))}}(a,e))}),[t]),d=Object(o.useCallback)((function(e,a){var n,c;t((n=e,c=a,function(t){t(x("loading")),t(function(t,e,a){return{type:"TASK/CHANGE_ENTITY_STATUS",payload:{taskId:t,todolistId:e,entityStatus:"loading"}}}(n,c)),k(c,n).then((function(e){0==e.data.resultCode?(t(x("succeeded")),t(function(t,e){return{type:"REMOVE_TASK",payload:{todoListId:e,taskId:t}}}(n,c))):I(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),l=Object(o.useCallback)((function(e,a,n){t(E(e,{status:a},n))}),[t]),u=Object(o.useCallback)((function(e,a,n){t(E(e,{title:a},n))}),[t]);return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)(Q.a,{container:!0,className:yt.a.addItem,children:Object(at.jsx)(nt,{callback:s})}),Object(at.jsx)(Q.a,{container:!0,spacing:0,children:a.map((function(t){var a=e[t.id];return Object(at.jsx)(Q.a,{children:Object(at.jsx)(q.a,{elevation:0,variant:"outlined",className:yt.a.paper,children:Object(at.jsx)(Tt,{entityStatus:t.entityStatus,id:t.id,filter:t.filter,title:t.title,tasks:a,addTask:r,removeTask:d,changeFilter:n,checkboxChange:l,removeTodoList:c,changeTaskTitle:u,changeTodoListTitle:i},t.id)})},t.id)}))})]})},mt=a(243),kt=a(240),St=a(119),vt=a.n(St);function xt(t){return Object(at.jsx)(kt.a,Object(j.a)({elevation:6,variant:"filled"},t))}function gt(){var t=Object(P.c)((function(t){return t.app.error})),e=Object(P.b)(),a=function(t,a){"clickaway"!==a&&e(g(null))};return Object(at.jsx)(mt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(at.jsx)(xt,{className:vt.a.message,onClose:a,severity:"error",children:t})})}var It=function(){var t=Object(P.c)((function(t){return t.app.status}));return Object(at.jsxs)(s.a.Fragment,{children:[Object(at.jsxs)(K.a,{position:"static",children:[Object(at.jsxs)(F.a,{className:U.a.navbar,children:[Object(at.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(at.jsx)(V.a,{})}),Object(at.jsx)(M.a,{variant:"h6",children:"TodoShka"}),Object(at.jsx)(H.a,{color:"inherit",children:"Login"})]}),"loading"===t&&Object(at.jsx)(Y.a,{className:U.a.progress,color:"secondary"})]}),Object(at.jsx)(B.a,{className:U.a.container,maxWidth:"xl",children:Object(at.jsx)(_t,{})}),Object(at.jsx)(gt,{})]})};r.a.render(Object(at.jsx)(P.a,{store:w,children:Object(at.jsx)(It,{})}),document.getElementById("root"))},36:function(t,e,a){t.exports={header:"Todolist_header__P1QI6",btnsWrapper:"Todolist_btnsWrapper__s30fF",deleteBtn:"Todolist_deleteBtn__GpHnW",btn:"Todolist_btn__6WOk9",span:"Todolist_span__1ql2_"}},54:function(t,e,a){t.exports={errorMessage:"AddItem_errorMessage__1R9-_",textField:"AddItem_textField__VQDjl",btnAdd:"AddItem_btnAdd__3nWMo"}},55:function(t,e,a){t.exports={trash:"Task_trash__2YWpi",wrapper:"Task_wrapper__1bcWt",span:"Task_span__Q0klS",isDone:"Task_isDone__3dO0E"}},78:function(t,e,a){t.exports={navbar:"App_navbar__3XP-h",container:"App_container__yxLVC"}},90:function(t,e,a){t.exports={paper:"TodolistsList_paper__2p22s",addItem:"TodolistsList_addItem__3-WbB"}}},[[196,1,2]]]);
//# sourceMappingURL=main.afbc312a.chunk.js.map