(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{17:function(t,e,a){t.exports={header:"Todolist_header__P1QI6",btnsWrapper:"Todolist_btnsWrapper__s30fF",filterBtns:"Todolist_filterBtns__KQUEi",btnRemove:"Todolist_btnRemove__o3c4x"}},29:function(t,e,a){t.exports={default:"Button_default__g8KV2",red:"Button_red__2s4lE",activeFilter:"Button_activeFilter__217hU"}},30:function(t,e,a){t.exports={errorMessage:"AddItem_errorMessage__1R9-_",input:"AddItem_input__3FHaU",btnAdd:"AddItem_btnAdd__3nWMo",wrapper:"AddItem_wrapper__1CSsz"}},31:function(t,e,a){t.exports={trash:"Task_trash__2YWpi",wrapper:"Task_wrapper__1bcWt",span:"Task_span__Q0klS",isDone:"Task_isDone__3dO0E"}},37:function(t,e,a){t.exports={input:"SuperCheckbox_input__29d-z"}},41:function(t,e,a){t.exports={superInput:"Input_superInput__2-ELH",errorInput:"Input_errorInput__37ZY3"}},42:function(t,e,a){t.exports={paper:"TodolistsList_paper__2p22s",addItem:"TodolistsList_addItem__3-WbB"}},54:function(t,e,a){t.exports={navbar:"App_navbar__3XP-h"}},55:function(t,e,a){t.exports={input:"EditableSpan_input__3c1_L"}},70:function(t,e,a){},99:function(t,e,a){"use strict";a.r(e);var n,c,s=a(0),o=a.n(s),r=a(14),i=a.n(r),l=(a(70),a(38)),d=a(51),u=a(36),b=a(16),j=a(4),p=a(52),O=a.n(p).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"b108fd33-d977-4add-bda9-9da2037bdf7a"}}),f=function(){return O.get("todo-lists")},h=function(t){return O.post("todo-lists",{title:t})},m=function(t){return O.delete("todo-lists/".concat(t))},_=function(t,e){return O.put("todo-lists/".concat(t),{title:e})},T=function(t){return O.get("todo-lists/".concat(t,"/tasks"))},k=function(t,e){return O.post("todo-lists/".concat(t,"/tasks"),{title:e})},v=function(t,e){return O.delete("todo-lists/".concat(t,"/tasks/").concat(e))},x=function(t,e,a){return O.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var y={},C=function(t,e,a){return function(n,c){var s=c().tasks[a].find((function(e){return e.id===t}));if(s){var o=Object(j.a)({title:s.title,startDate:s.startDate,priority:s.priority,description:s.description,deadline:s.deadline,status:s.status},e);x(a,t,o).then((function(){var c=function(t,e,a){return{type:"UPDATE_TASK",payload:{todolistId:a,taskId:t,model:e}}}(t,e,a);n(c)}))}else console.log("No data")}},g=a(128),I=(Object(g.a)(),Object(g.a)(),[]),N=function(t){f().then((function(e){var a={type:"SET_TODOLISTS",payload:{todos:e.data}};t(a)}))},E=Object(l.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,e.payload.tasks));case"SET_TODOLISTS":var a=Object(j.a)({},t);return e.payload.todos.forEach((function(t){a[t.id]=[]})),a;case"ADD_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(u.a)(t[e.payload.task.todoListId]))));case"REMOVE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todoListId,t[e.payload.todoListId].filter((function(t){return t.id!==e.payload.taskId}))));case"UPDATE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(j.a)(Object(j.a)({},t),e.payload.model):t}))));case"ADD_TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(j.a)({},t);return delete n[e.payload.todoListId],n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{filter:e.payload.value}):t}));case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todoListId}));case"ADD_TODOLIST":return[Object(j.a)(Object(j.a)({},e.payload.todolist),{},{filter:"All"})].concat(Object(u.a)(t));case"UPDATE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{title:e.payload.title}):t}));case"SET_TODOLISTS":return e.payload.todos.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"All"})}));default:return t}}}),A=Object(l.c)(E,Object(l.a)(d.a));window.store=A;var S=a(15),L=a(54),D=a.n(L),w=a(122),K=a(123),F=a(125),P=a(126),R=a(124),B=a(60),M=a.n(B),U=a(127),W=a(121),H=a(101),V=a(22),Q=a(21),z=a(29),G=a.n(z),J=a(2),Y=function(t){var e=t.title,a=t.red,n=t.filter,c=t.className,s=Object(Q.a)(t,["title","red","filter","className"]),o="".concat(c&&c," ").concat(a?G.a.red+" "+G.a.default:G.a.default," ").concat(n===e?G.a.activeFilter:"");return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("button",Object(j.a)({className:o},s))})},q=a(41),X=a.n(q),Z=function(t){t.type;var e=t.onChange,a=t.onChangeText,n=t.onKeyPress,c=t.onEnter,s=(t.callback,t.className),o=(t.spanClassName,t.error),r=Object(Q.a)(t,["type","onChange","onChangeText","onKeyPress","onEnter","callback","className","spanClassName","error"]),i="".concat(o?X.a.errorInput:X.a.superInput," ").concat(s||"");return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("input",Object(j.a)({type:"text",onChange:function(t){e&&e(t),a&&a(t.currentTarget.value)},onKeyPress:function(t){n&&n(t),c&&"Enter"===t.key&&c()},className:i},r))})},$=a(35),tt=a(30),et=a.n(tt),at=o.a.memo((function(t){var e=t.callback,a=Object(s.useState)(""),n=Object(V.a)(a,2),c=n[0],o=n[1],r=Object(s.useState)(!1),i=Object(V.a)(r,2),l=i[0],d=i[1],u=function(){""!==c.trim()?(e(c.trim()),o("")):d(!0)};return Object(J.jsxs)("div",{className:et.a.wrapper,children:[Object(J.jsx)(Z,{className:et.a.input,error:l,value:c,onChange:function(t){o(t.currentTarget.value),d(!1)},onKeyPress:function(t){l&&d(!1),"Enter"===t.key&&u()}}),Object(J.jsx)(Y,{title:"Add",className:et.a.btnAdd,onClick:u,children:Object(J.jsx)($.a,{})}),l&&Object(J.jsx)("span",{className:l?et.a.errorMessage:"",children:'"Title is required!"'})]})})),nt=a(17),ct=a.n(nt),st=a(55),ot=a.n(st),rt=o.a.memo((function(t){var e=t.title,a=t.changeTaskTitle,n=t.className,c=Object(s.useState)(!1),o=Object(V.a)(c,2),r=o[0],i=o[1],l=Object(s.useState)(e),d=Object(V.a)(l,2),u=d[0],b=d[1];return r?Object(J.jsx)("input",{className:ot.a.input,autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;u&&a(e),b(e)},onBlur:function(){i(!1)},value:u,onKeyPress:function(t){"Enter"===t.key&&i(!1)}}):Object(J.jsx)("span",{className:n,onDoubleClick:function(){i(!0)},children:e})})),it=a(31),lt=a.n(it),dt=a(37),ut=a.n(dt),bt=function(t){t.type;var e=t.onChange,a=t.onChangeChecked,n=t.className,c=(t.spanClassName,t.children),s=Object(Q.a)(t,["type","onChange","onChangeChecked","className","spanClassName","children"]),o="".concat(ut.a.input," ").concat(n||"");return Object(J.jsxs)("label",{className:ut.a.label,children:[Object(J.jsx)("input",Object(j.a)({type:"checkbox",onChange:function(t){e&&e(t),a&&a(t.currentTarget.checked)},className:o},s)),c&&Object(J.jsx)("span",{className:ut.a.spanClassName,children:c})]})},jt=o.a.memo((function(t){var e=t.removeTask,a=t.checkboxChange,c=t.changeTaskTitle,o=t.task,r=t.todolistId,i=Object(s.useCallback)((function(t){c(o.id,t,r)}),[c,o.id,r]);return Object(J.jsx)("li",{className:o.status===n.Completed?lt.a.isDone:"",children:Object(J.jsxs)("div",{className:lt.a.wrapper,children:[Object(J.jsx)(bt,{checked:o.status===n.Completed,onChange:function(t){a(o.id,t.currentTarget.checked?n.Completed:n.New,r)},children:Object(J.jsx)(rt,{className:lt.a.span,changeTaskTitle:i,title:o.title})}),Object(J.jsx)("div",{className:lt.a.trash,onClick:function(){e(o.id,r)},children:Object(J.jsx)($.b,{})})]})})})),pt=o.a.memo((function(t){var e=t.title,a=t.tasks,c=t.removeTask,o=t.changeFilter,r=t.addTask,i=t.checkboxChange,l=t.filter,d=t.id,u=t.removeTodoList,b=t.changeTaskTitle,j=t.changeTodoListTitle,p=Object(S.b)(),O=Object(s.useCallback)((function(){return o("All",d)}),[o,d]),f=Object(s.useCallback)((function(){return o("Active",d)}),[o,d]),h=Object(s.useCallback)((function(){return o("Completed",d)}),[o,d]),m=Object(s.useCallback)((function(t){r(t,d)}),[r,d]),_=Object(s.useCallback)((function(t){j(d,t)}),[j,d]),k=a;return"Completed"===l&&(k=a.filter((function(t){return t.status===n.Completed}))),"Active"===l&&(k=a.filter((function(t){return t.status===n.New}))),Object(s.useEffect)((function(){var t;p((t=d,function(e){T(t).then((function(a){var n=function(t,e){return{type:"SET_TASKS",payload:{tasks:t,todolistId:e}}}(a.data.items,t);e(n)}))}))}),[]),Object(J.jsxs)("div",{className:ct.a.wrapper,children:[Object(J.jsx)(rt,{className:ct.a.header,title:e,changeTaskTitle:_}),Object(J.jsx)(at,{callback:m}),Object(J.jsx)("ul",{children:k.map((function(t){return Object(J.jsx)(jt,{changeTaskTitle:b,removeTask:c,checkboxChange:i,task:t,todolistId:d},t.id)}))}),Object(J.jsxs)("div",{className:ct.a.btnsWrapper,children:[Object(J.jsx)(Y,{className:ct.a.filterBtns,filter:l,title:"All",onClick:O,children:"All"}),Object(J.jsx)(Y,{className:ct.a.filterBtns,filter:l,title:"Active",onClick:f,children:"Active"}),Object(J.jsx)(Y,{className:ct.a.filterBtns,filter:l,title:"Completed",onClick:h,children:"Completed"}),Object(J.jsx)(Y,{className:ct.a.filterBtns,title:"RemoveAll",red:!0,onClick:function(){return u(d)},children:"Remove all"})]})]})})),Ot=a(42),ft=a.n(Ot),ht=function(){var t=Object(S.b)(),e=Object(S.c)((function(t){return t.tasks})),a=Object(S.c)((function(t){return t.todolists})),n=Object(s.useCallback)((function(e,a){var n=function(t,e){return{type:"CHANGE_FILTER",payload:{value:t,todolistId:e}}}(e,a);t(n)}),[t]),c=Object(s.useCallback)((function(e){var a;t((a=e,function(t){m(a).then((function(e){t({type:"REMOVE_TODOLIST",payload:{todoListId:a}})}))}))}),[t]),o=Object(s.useCallback)((function(e){t(function(t){return function(e){h(t).then((function(t){var a={type:"ADD_TODOLIST",payload:{todolist:t.data.data.item}};e(a)}))}}(e))}),[t]);Object(s.useEffect)((function(){t(N)}),[]);var r=Object(s.useCallback)((function(e,a){t(function(t,e){return function(a){_(t,e).then((function(n){var c=function(t,e){return{type:"UPDATE_TODOLIST_TITLE",payload:{todolistId:t,title:e}}}(t,e);a(c)}))}}(e,a))}),[t]),i=Object(s.useCallback)((function(e,a){t(function(t,e){return function(a){k(t,e).then((function(t){var e={type:"ADD_TASK",payload:{task:t.data.data.item}};a(e)}))}}(a,e))}),[t]),l=Object(s.useCallback)((function(e,a){var n,c;t((n=e,c=a,function(t){v(c,n).then((function(e){var a=function(t,e){return{type:"REMOVE_TASK",payload:{todoListId:e,taskId:t}}}(n,c);t(a)}))}))}),[t]),d=Object(s.useCallback)((function(e,a,n){t(C(e,{status:a},n))}),[t]),u=Object(s.useCallback)((function(e,a,n){t(C(e,{title:a},n))}),[t]);return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(W.a,{container:!0,className:ft.a.addItem,children:Object(J.jsx)(at,{callback:o})}),Object(J.jsx)(W.a,{container:!0,spacing:0,children:a.map((function(t){var a=e[t.id];return Object(J.jsx)(W.a,{children:Object(J.jsx)(H.a,{style:{padding:"1rem",backgroundColor:"#202d47"},elevation:0,variant:"outlined",className:ft.a.paper,children:Object(J.jsx)(pt,{id:t.id,filter:t.filter,title:t.title,tasks:a,addTask:i,removeTask:l,changeFilter:n,checkboxChange:d,removeTodoList:c,changeTaskTitle:u,changeTodoListTitle:r},t.id)})},t.id)}))})]})};var mt=function(){return Object(J.jsxs)(o.a.Fragment,{children:[Object(J.jsx)(w.a,{position:"static",children:Object(J.jsxs)(K.a,{className:D.a.navbar,children:[Object(J.jsx)(R.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(J.jsx)(M.a,{})}),Object(J.jsx)(F.a,{variant:"h6",children:"TodoShka"}),Object(J.jsx)(P.a,{color:"inherit",children:"Login"})]})}),Object(J.jsx)(U.a,{maxWidth:"xl",children:Object(J.jsx)(ht,{})})]})};i.a.render(Object(J.jsx)(S.a,{store:A,children:Object(J.jsx)(mt,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.abb15714.chunk.js.map