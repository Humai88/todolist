(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{104:function(t,e,a){t.exports={paper:"TodolistsList_paper__2p22s",addItem:"TodolistsList_addItem__3-WbB"}},106:function(t,e,a){t.exports={form:"Login_form__1u3KK",btn:"Login_btn__J0HQ7"}},137:function(t,e,a){t.exports={input:"EditableSpan_input__3c1_L",span:"EditableSpan_span__1cdp9"}},140:function(t,e,a){t.exports={message:"ErrorSnackbar_message__38d7O"}},161:function(t,e,a){},225:function(t,e,a){"use strict";a.r(e);var n,c,i=a(0),o=a.n(i),s=a(11),r=a.n(s),d=(a(161),a(92)),l=a(130),u=a(8),b=a(131),j=a.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"b108fd33-d977-4add-bda9-9da2037bdf7a"}}),O=function(){return j.get("todo-lists")},p=function(t){return j.post("todo-lists",{title:t})},f=function(t){return j.delete("todo-lists/".concat(t))},h=function(t,e){return j.put("todo-lists/".concat(t),{title:e})},m=function(t){return j.get("todo-lists/".concat(t,"/tasks"))},T=function(t,e){return j.post("todo-lists/".concat(t,"/tasks"),{title:e})},x=function(t,e){return j.delete("todo-lists/".concat(t,"/tasks/").concat(e))},y=function(t,e,a){return j.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},g=function(t){return j.post("auth/login",t)},_=function(){return j.delete("auth/login")},v=function(){return j.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var k={status:"idle",error:null,isInitialized:!1},I=function(t){return{type:"APP/SET-STATUS",payload:{status:t}}},S=function(t){return{type:"APP/SET-ERROR",payload:{error:t}}},A=function(t,e){t.messages.length?e(S(t.messages[0])):e(S("Some error occurred")),e(I("failed"))},C=function(t,e){e(S(t.message)),e(I("failed"))},E={isLoggedIn:!1},L=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},N=a(90),D=a(37),w={},P=function(t,e,a){return function(n,c){var i=c().tasks[a].find((function(e){return e.id===t}));if(i){var o=Object(u.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},e);y(a,t,o).then((function(c){0==c.data.resultCode?n(function(t,e,a){return{type:"UPDATE_TASK",payload:{todolistId:a,taskId:t,model:e}}}(t,e,a)):A(c.data,n)})).catch((function(t){C(t,n)}))}}},R=a(276),F=(Object(R.a)(),Object(R.a)(),[]),K=Object(d.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,e.payload.tasks));case"SET_TODOLISTS":var a=Object(u.a)({},t);return e.payload.todos.forEach((function(t){a[t.id]=[]})),a;case"ADD_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(N.a)(t[e.payload.task.todoListId]))));case"REMOVE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todoListId,t[e.payload.todoListId].filter((function(t){return t.id!==e.payload.taskId}))));case"TASK/CHANGE_ENTITY_STATUS":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}))));case"UPDATE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(u.a)(Object(u.a)({},t),e.payload.model):t}))));case"ADD_TODOLIST":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(u.a)({},t);return delete n[e.payload.todoListId],n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(u.a)(Object(u.a)({},t),{},{filter:e.payload.value}):t}));case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todoListId}));case"ADD_TODOLIST":return[Object(u.a)(Object(u.a)({},e.payload.todolist),{},{filter:"All",entityStatus:"idle"})].concat(Object(N.a)(t));case"UPDATE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(u.a)(Object(u.a)({},t),{},{title:e.payload.title}):t}));case"SET_TODOLISTS":return e.payload.todos.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"All",entityStatus:"idle"})}));case"TODOLIST/CHANGE_ENTITY_STATUS":return t.map((function(t){return t.id===e.payload.id?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(u.a)(Object(u.a)({},t),{},{status:e.payload.status});case"APP/SET-ERROR":return Object(u.a)(Object(u.a)({},t),{},{error:e.payload.error});case"APP/SET-INITIALISATION":return Object(u.a)(Object(u.a)({},t),{},{isInitialized:e.payload.isInitialized});default:return Object(u.a)({},t)}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(u.a)(Object(u.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),M=Object(d.c)(K,Object(d.a)(l.a));window.store=M;var U=a(17),G=a(91),H=a.n(G),W=a(270),B=a(271),V=a(230),z=a(268),Y=a(126),q=a(143),Q=a.n(q),J=a(273),Z=a(272),X=a(265),$=a(229),tt=a(58),et=a(65),at=a.n(et),nt=a(274),ct=a(85),it=a.n(ct),ot=a(263),st=a(4),rt=o.a.memo((function(t){var e=t.callback,a=t.disabled,n=Object(i.useState)(""),c=Object(tt.a)(n,2),o=c[0],s=c[1],r=Object(i.useState)(!1),d=Object(tt.a)(r,2),l=d[0],u=d[1],b=function(){""!==o.trim()?(e(o.trim()),s("")):u(!0)};return Object(st.jsxs)("div",{className:at.a.wrapper,children:[Object(st.jsx)(nt.a,{className:at.a.textField,variant:"outlined",error:l,value:o,onChange:function(t){s(t.currentTarget.value),u(!1)},onKeyPress:function(t){l&&u(!1),"Enter"===t.key&&b()},label:"Title",helperText:l,disabled:a}),Object(st.jsx)(it.a,{color:"primary",className:at.a.btnAdd,onClick:b,disabled:a,children:Object(st.jsx)(ot.a,{})}),l&&Object(st.jsx)("span",{className:l?at.a.errorMessage:"",children:'"Title is required!"'})]})})),dt=a(49),lt=a.n(dt),ut=a(137),bt=a.n(ut),jt=o.a.memo((function(t){var e=t.title,a=t.changeTaskTitle,n=t.className,c=t.disabled,o=Object(i.useState)(!1),s=Object(tt.a)(o,2),r=s[0],d=s[1],l=Object(i.useState)(e),u=Object(tt.a)(l,2),b=u[0],j=u[1];return r?Object(st.jsx)(nt.a,{className:bt.a.input,autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;b&&a(e),j(e)},onBlur:function(){d(!1)},value:b,onKeyPress:function(t){"Enter"===t.key&&d(!1)},disabled:c}):Object(st.jsx)("span",{className:n,onDoubleClick:function(){d(!0)},children:e})})),Ot=a(66),pt=a.n(Ot),ft=a(138),ht=a.n(ft),mt=a(264),Tt=o.a.memo((function(t){var e=t.removeTask,a=t.checkboxChange,c=t.changeTaskTitle,o=t.task,s=t.todolistId,r=t.entityStatus,d=Object(i.useCallback)((function(t){c(o.id,t,s)}),[c,o.id,s]);return Object(st.jsx)("li",{className:o.status===n.Completed?pt.a.isDone:"",children:Object(st.jsxs)("div",{className:pt.a.wrapper,children:[Object(st.jsx)(ht.a,{checked:o.status===n.Completed,onChange:function(t){a(o.id,t.currentTarget.checked?n.Completed:n.New,s)}}),Object(st.jsx)(jt,{className:pt.a.span,changeTaskTitle:d,title:o.title,disabled:"loading"===r}),Object(st.jsx)(it.a,{className:pt.a.trash,onClick:function(){e(o.id,s)},children:Object(st.jsx)(mt.a,{})})]})})})),xt=a(67),yt=a.n(xt),gt=o.a.memo((function(t){var e=t.title,a=t.tasks,c=t.removeTask,o=t.changeFilter,s=t.addTask,r=t.checkboxChange,d=t.filter,l=t.id,u=t.removeTodoList,b=t.changeTaskTitle,j=t.changeTodoListTitle,O=t.entityStatus,p=Object(U.b)(),f=Object(i.useCallback)((function(){return o("All",l)}),[o,l]),h=Object(i.useCallback)((function(){return o("Active",l)}),[o,l]),T=Object(i.useCallback)((function(){return o("Completed",l)}),[o,l]),x=Object(i.useCallback)((function(t){s(t,l)}),[s,l]),y=Object(i.useCallback)((function(t){j(l,t)}),[j,l]),g=a;return"Completed"===d&&(g=a.filter((function(t){return t.status===n.Completed}))),"Active"===d&&(g=a.filter((function(t){return t.status===n.New}))),Object(i.useEffect)((function(){var t;p((t=l,function(e){e(I("loading")),m(t).then((function(a){e(I("succeeded"));var n=a.data.items;e(function(t,e){return{type:"SET_TASKS",payload:{tasks:t,todolistId:e}}}(n,t))}))}))}),[]),Object(st.jsxs)("div",{children:[Object(st.jsx)("h3",{children:Object(st.jsx)(jt,{className:lt.a.span,title:e,changeTaskTitle:y,disabled:"loading"===O})}),Object(st.jsx)(rt,{callback:x,disabled:"loading"===O}),Object(st.jsx)("div",{children:g.map((function(t){return Object(st.jsx)(Tt,{entityStatus:t.entityStatus,changeTaskTitle:b,removeTask:c,checkboxChange:r,task:t,todolistId:l},t.id)}))}),Object(st.jsxs)("div",{className:lt.a.btnsWrapper,children:[Object(st.jsx)(yt.a,{className:lt.a.btn,variant:"All"===d?"contained":"text",onClick:f,color:"secondary",children:"All"}),Object(st.jsx)(yt.a,{className:lt.a.btn,variant:"Active"===d?"contained":"text",onClick:h,color:"secondary",children:"Active"}),Object(st.jsx)(yt.a,{className:lt.a.btn,variant:"Completed"===d?"contained":"text",onClick:T,color:"secondary",children:"Completed"}),Object(st.jsx)(yt.a,{className:lt.a.deleteBtn,disabled:"loading"===O,onClick:function(){return u(l)},children:"Remove all"})]})]})})),_t=a(104),vt=a.n(_t),kt=a(14),It=function(){var t=Object(U.b)(),e=Object(U.c)((function(t){return t.tasks})),a=Object(U.c)((function(t){return t.todolists})),n=Object(U.c)((function(t){return t.auth.isLoggedIn})),c=Object(i.useCallback)((function(e,a){var n=function(t,e){return{type:"CHANGE_FILTER",payload:{value:t,todolistId:e}}}(e,a);t(n)}),[t]),o=Object(i.useCallback)((function(e){var a;t((a=e,function(t){t(I("loading")),t({type:"TODOLIST/CHANGE_ENTITY_STATUS",payload:{id:a,entityStatus:"loading"}}),f(a).then((function(e){0===e.data.resultCode?(t(I("succeeded")),t({type:"REMOVE_TODOLIST",payload:{todoListId:a}})):A(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),s=Object(i.useCallback)((function(e){t(function(t){return function(e){e(I("loading")),p(t).then((function(t){0==t.data.resultCode?(e({type:"ADD_TODOLIST",payload:{todolist:t.data.data.item}}),e(I("succeeded"))):A(t.data,e)})).catch((function(t){C(t,e)}))}}(e))}),[t]);Object(i.useEffect)((function(){n&&t((function(t){t(I("loading")),O().then((function(e){t(I("succeeded")),t({type:"SET_TODOLISTS",payload:{todos:e.data}})})).catch((function(e){C(e,t)}))}))}),[]);var r=Object(i.useCallback)((function(e,a){t(function(t,e){return function(a){h(t,e).then((function(n){0==n.data.resultCode?a(function(t,e){return{type:"UPDATE_TODOLIST_TITLE",payload:{todolistId:t,title:e}}}(t,e)):A(n.data,a)})).catch((function(t){C(t,a)}))}}(e,a))}),[t]),d=Object(i.useCallback)((function(e,a){t(function(t,e){return function(a){a(I("loading")),T(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD_TASK",payload:{task:t}}}(e)),a(I("succeeded"))}else A(t.data,a)})).catch((function(t){C(t,a)}))}}(a,e))}),[t]),l=Object(i.useCallback)((function(e,a){var n,c;t((n=e,c=a,function(t){t(I("loading")),t(function(t,e,a){return{type:"TASK/CHANGE_ENTITY_STATUS",payload:{taskId:t,todolistId:e,entityStatus:"loading"}}}(n,c)),x(c,n).then((function(e){0==e.data.resultCode?(t(I("succeeded")),t(function(t,e){return{type:"REMOVE_TASK",payload:{todoListId:e,taskId:t}}}(n,c))):A(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),u=Object(i.useCallback)((function(e,a,n){t(P(e,{status:a},n))}),[t]),b=Object(i.useCallback)((function(e,a,n){t(P(e,{title:a},n))}),[t]);return n?Object(st.jsxs)(st.Fragment,{children:[Object(st.jsx)(X.a,{container:!0,className:vt.a.addItem,children:Object(st.jsx)(rt,{callback:s})}),Object(st.jsx)(X.a,{container:!0,spacing:0,children:a.map((function(t){var a=e[t.id];return Object(st.jsx)(X.a,{children:Object(st.jsx)($.a,{elevation:0,variant:"outlined",className:vt.a.paper,children:Object(st.jsx)(gt,{entityStatus:t.entityStatus,id:t.id,filter:t.filter,title:t.title,tasks:a,addTask:d,removeTask:l,changeFilter:c,checkboxChange:u,removeTodoList:o,changeTaskTitle:b,changeTodoListTitle:r},t.id)})},t.id)}))})]}):Object(st.jsx)(kt.a,{to:"/login"})},St=a(279),At=a(275),Ct=a(140),Et=a.n(Ct);function Lt(t){return Object(st.jsx)(At.a,Object(u.a)({elevation:6,variant:"filled"},t))}function Nt(){var t=Object(U.c)((function(t){return t.app.error})),e=Object(U.b)(),a=function(t,a){"clickaway"!==a&&e(S(null))};return Object(st.jsx)(St.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(st.jsx)(Lt,{className:Et.a.message,onClose:a,severity:"error",children:t})})}var Dt=a(103),wt=a(106),Pt=a.n(wt),Rt=a(144),Ft=a(261),Kt=a(262),Mt=a(266),Ut=a(267),Gt=a(277),Ht=function(){var t=Object(U.b)(),e=Object(U.c)((function(t){return t.auth.isLoggedIn})),a=Object(Rt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<=2&&(e.password="Password must be at least 2 characters long"):e.password="Required",e},onSubmit:function(e){var n;a.resetForm(),t((n=e,function(t){t(I("loading")),g(n).then((function(e){0===e.data.resultCode?(t(L(!0)),t(I("succeeded"))):A(e.data,t)})).catch((function(e){C(e,t)}))}))}});return e?Object(st.jsx)(kt.a,{to:"/"}):Object(st.jsx)(X.a,{container:!0,justify:"center",children:Object(st.jsx)(X.a,{item:!0,xs:4,children:Object(st.jsx)("form",{onSubmit:a.handleSubmit,className:Pt.a.form,children:Object(st.jsxs)(Ft.a,{children:[Object(st.jsxs)(Kt.a,{children:[Object(st.jsxs)("p",{children:["To log in get registered \xa0",Object(st.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(st.jsx)("p",{children:"or use common test account credentials:"}),Object(st.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(st.jsx)("p",{children:"Password: free"})]}),Object(st.jsxs)(Mt.a,{children:[Object(st.jsx)(nt.a,Object(u.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?Object(st.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(st.jsx)(nt.a,Object(u.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.email?Object(st.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(st.jsx)(Ut.a,{label:"Remember me",control:Object(st.jsx)(Gt.a,{onChange:a.handleChange,name:"rememberMe",value:a.values.rememberMe,onBlur:a.handleBlur})}),Object(st.jsx)(z.a,{type:"submit",className:Pt.a.btn,variant:"contained",children:"Login"})]})]})})})})},Wt=a(269);var Bt=function(){var t=Object(U.c)((function(t){return t.app.status})),e=Object(U.c)((function(t){return t.app.isInitialized})),a=Object(U.c)((function(t){return t.auth.isLoggedIn})),n=Object(U.b)();return Object(i.useEffect)((function(){n((function(t){v().then((function(e){0===e.data.resultCode&&t(L(!0))})).finally((function(){t({type:"APP/SET-INITIALISATION",payload:{isInitialized:!0}})}))}))}),[]),e?Object(st.jsx)(o.a.Fragment,{children:Object(st.jsxs)(Dt.a,{children:[Object(st.jsxs)(W.a,{position:"static",children:[Object(st.jsxs)(B.a,{className:H.a.navbar,children:[Object(st.jsx)(Y.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(st.jsx)(Q.a,{})}),Object(st.jsx)(V.a,{variant:"h6",children:"TodoShka"}),a&&Object(st.jsx)(z.a,{onClick:function(){n((function(t){t(I("loading")),_().then((function(e){0===e.data.resultCode?(t(L(!1)),t(I("succeeded"))):A(e.data,t)})).catch((function(e){C(e,t)}))}))},color:"inherit",children:"Log Out"})]}),"loading"===t&&Object(st.jsx)(Z.a,{className:H.a.progress,color:"secondary"})]}),Object(st.jsx)(J.a,{className:H.a.container,maxWidth:"xl",children:Object(st.jsxs)(kt.d,{children:[Object(st.jsx)(kt.b,{exact:!0,path:"/todolist",render:function(){return Object(st.jsx)(It,{})}}),Object(st.jsx)(kt.b,{exact:!0,path:"/login",render:function(){return Object(st.jsx)(Ht,{})}}),Object(st.jsx)(kt.b,{path:"/404",render:function(){return Object(st.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(st.jsx)(kt.a,{from:"*",to:"/404"})]})}),Object(st.jsx)(Nt,{})]})}):Object(st.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(st.jsx)(Wt.a,{})})};r.a.render(Object(st.jsx)(U.a,{store:M,children:Object(st.jsx)(Bt,{})}),document.getElementById("root"))},49:function(t,e,a){t.exports={header:"Todolist_header__P1QI6",btnsWrapper:"Todolist_btnsWrapper__s30fF",deleteBtn:"Todolist_deleteBtn__GpHnW",btn:"Todolist_btn__6WOk9",span:"Todolist_span__1ql2_"}},65:function(t,e,a){t.exports={errorMessage:"AddItem_errorMessage__1R9-_",textField:"AddItem_textField__VQDjl",btnAdd:"AddItem_btnAdd__3nWMo"}},66:function(t,e,a){t.exports={trash:"Task_trash__2YWpi",wrapper:"Task_wrapper__1bcWt",span:"Task_span__Q0klS",isDone:"Task_isDone__3dO0E"}},91:function(t,e,a){t.exports={navbar:"App_navbar__3XP-h",container:"App_container__yxLVC"}}},[[225,1,2]]]);
//# sourceMappingURL=main.dd5e0731.chunk.js.map