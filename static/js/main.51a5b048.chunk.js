(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{117:function(t,e,a){t.exports={input:"EditableSpan_input__3c1_L",span:"EditableSpan_span__1cdp9"}},134:function(t,e,a){},195:function(t,e,a){"use strict";a.r(e);var n,c,o=a(0),s=a.n(o),i=a(11),r=a.n(i),l=(a(134),a(78)),d=a(110),u=a(77),b=a(32),j=a(9),O=a(111),p=a.n(O).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"b108fd33-d977-4add-bda9-9da2037bdf7a"}}),f=function(){return p.get("todo-lists")},T=function(t){return p.post("todo-lists",{title:t})},h=function(t){return p.delete("todo-lists/".concat(t))},m=function(t,e){return p.put("todo-lists/".concat(t),{title:e})},_=function(t){return p.get("todo-lists/".concat(t,"/tasks"))},y=function(t,e){return p.post("todo-lists/".concat(t,"/tasks"),{title:e})},k=function(t,e){return p.delete("todo-lists/".concat(t,"/tasks/").concat(e))},v=function(t,e,a){return p.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var x={status:"idle",error:null},g=function(t){return{type:"APP/SET-STATUS",payload:{status:t}}},S=function(t){return{type:"APP/SET-ERROR",payload:{error:t}}},C={},I=function(t,e,a){return function(n,c){var o=c().tasks[a].find((function(e){return e.id===t}));if(o){var s=Object(j.a)({title:o.title,startDate:o.startDate,priority:o.priority,description:o.description,deadline:o.deadline,status:o.status},e);v(a,t,s).then((function(){n(function(t,e,a){return{type:"UPDATE_TASK",payload:{todolistId:a,taskId:t,model:e}}}(t,e,a))}))}}},E=a(240),A=(Object(E.a)(),Object(E.a)(),[]),L=Object(l.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,e.payload.tasks));case"SET_TODOLISTS":var a=Object(j.a)({},t);return e.payload.todos.forEach((function(t){a[t.id]=[]})),a;case"ADD_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(u.a)(t[e.payload.task.todoListId]))));case"REMOVE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todoListId,t[e.payload.todoListId].filter((function(t){return t.id!==e.payload.taskId}))));case"UPDATE_TASK":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(j.a)(Object(j.a)({},t),e.payload.model):t}))));case"ADD_TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e.payload.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(j.a)({},t);return delete n[e.payload.todoListId],n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{filter:e.payload.value}):t}));case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todoListId}));case"ADD_TODOLIST":return[Object(j.a)(Object(j.a)({},e.payload.todolist),{},{filter:"All",entityStatus:"idle"})].concat(Object(u.a)(t));case"UPDATE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(j.a)(Object(j.a)({},t),{},{title:e.payload.title}):t}));case"SET_TODOLISTS":return e.payload.todos.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"All",entityStatus:"idle"})}));case"CHANGE_ENTITY_STATUS":return t.map((function(t){return t.id===e.payload.id?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(j.a)(Object(j.a)({},t),{},{status:e.payload.status});case"APP/SET-ERROR":return Object(j.a)(Object(j.a)({},t),{},{error:e.payload.error});default:return Object(j.a)({},t)}}}),D=Object(l.c)(L,Object(l.a)(d.a));window.store=D;var N=a(19),w=a(89),P=a.n(w),R=a(232),F=a(233),U=a(234),K=a(235),M=a(107),W=a(119),H=a.n(W),V=a(237),B=a(236),G=a(231),Q=a(199),Y=a(46),q=a(54),J=a.n(q),X=a(238),z=a(74),Z=a.n(z),$=a(229),tt=a(5),et=s.a.memo((function(t){var e=t.callback,a=Object(o.useState)(""),n=Object(Y.a)(a,2),c=n[0],s=n[1],i=Object(o.useState)(!1),r=Object(Y.a)(i,2),l=r[0],d=r[1],u=function(){""!==c.trim()?(e(c.trim()),s("")):d(!0)};return Object(tt.jsxs)("div",{className:J.a.wrapper,children:[Object(tt.jsx)(X.a,{className:J.a.textField,variant:"outlined",error:l,value:c,onChange:function(t){s(t.currentTarget.value),d(!1)},onKeyPress:function(t){l&&d(!1),"Enter"===t.key&&u()},label:"Title",helperText:l}),Object(tt.jsx)(Z.a,{color:"primary",className:J.a.btnAdd,onClick:u,children:Object(tt.jsx)($.a,{})}),l&&Object(tt.jsx)("span",{className:l?J.a.errorMessage:"",children:'"Title is required!"'})]})})),at=a(36),nt=a.n(at),ct=a(117),ot=a.n(ct),st=s.a.memo((function(t){var e=t.title,a=t.changeTaskTitle,n=t.className,c=Object(o.useState)(!1),s=Object(Y.a)(c,2),i=s[0],r=s[1],l=Object(o.useState)(e),d=Object(Y.a)(l,2),u=d[0],b=d[1];return i?Object(tt.jsx)(X.a,{className:ot.a.input,autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;u&&a(e),b(e)},onBlur:function(){r(!1)},value:u,onKeyPress:function(t){"Enter"===t.key&&r(!1)}}):Object(tt.jsx)("span",{className:n,onDoubleClick:function(){r(!0)},children:e})})),it=a(55),rt=a.n(it),lt=a(118),dt=a.n(lt),ut=a(230),bt=s.a.memo((function(t){var e=t.removeTask,a=t.checkboxChange,c=t.changeTaskTitle,s=t.task,i=t.todolistId,r=Object(o.useCallback)((function(t){c(s.id,t,i)}),[c,s.id,i]);return Object(tt.jsx)("li",{className:s.status===n.Completed?rt.a.isDone:"",children:Object(tt.jsxs)("div",{className:rt.a.wrapper,children:[Object(tt.jsx)(dt.a,{checked:s.status===n.Completed,onChange:function(t){a(s.id,t.currentTarget.checked?n.Completed:n.New,i)}}),Object(tt.jsx)(st,{className:rt.a.span,changeTaskTitle:r,title:s.title}),Object(tt.jsx)(Z.a,{className:rt.a.trash,onClick:function(){e(s.id,i)},children:Object(tt.jsx)(ut.a,{})})]})})})),jt=a(56),Ot=a.n(jt),pt=s.a.memo((function(t){var e=t.title,a=t.tasks,c=t.removeTask,s=t.changeFilter,i=t.addTask,r=t.checkboxChange,l=t.filter,d=t.id,u=t.removeTodoList,b=t.changeTaskTitle,j=t.changeTodoListTitle,O=t.entityStatus,p=Object(N.b)(),f=Object(o.useCallback)((function(){return s("All",d)}),[s,d]),T=Object(o.useCallback)((function(){return s("Active",d)}),[s,d]),h=Object(o.useCallback)((function(){return s("Completed",d)}),[s,d]),m=Object(o.useCallback)((function(t){i(t,d)}),[i,d]),y=Object(o.useCallback)((function(t){j(d,t)}),[j,d]),k=a;return"Completed"===l&&(k=a.filter((function(t){return t.status===n.Completed}))),"Active"===l&&(k=a.filter((function(t){return t.status===n.New}))),Object(o.useEffect)((function(){var t;p((t=d,function(e){e(g("loading")),_(t).then((function(a){e(g("succeeded"));var n=a.data.items;e(function(t,e){return{type:"SET_TASKS",payload:{tasks:t,todolistId:e}}}(n,t))}))}))}),[]),Object(tt.jsxs)("div",{children:[Object(tt.jsx)("h3",{children:Object(tt.jsx)(st,{className:nt.a.span,title:e,changeTaskTitle:y})}),Object(tt.jsx)(et,{callback:m}),Object(tt.jsx)("div",{children:k.map((function(t){return Object(tt.jsx)(bt,{changeTaskTitle:b,removeTask:c,checkboxChange:r,task:t,todolistId:d},t.id)}))}),Object(tt.jsxs)("div",{className:nt.a.btnsWrapper,children:[Object(tt.jsx)(Ot.a,{className:nt.a.btn,variant:"All"===l?"contained":"text",onClick:f,color:"secondary",children:"All"}),Object(tt.jsx)(Ot.a,{className:nt.a.btn,variant:"Active"===l?"contained":"text",onClick:T,color:"secondary",children:"Active"}),Object(tt.jsx)(Ot.a,{className:nt.a.btn,variant:"Completed"===l?"contained":"text",onClick:h,color:"secondary",children:"Completed"}),Object(tt.jsx)(Ot.a,{className:nt.a.deleteBtn,disabled:"loading"===O,onClick:function(){return u(d)},children:"Remove all"})]})]})})),ft=a(90),Tt=a.n(ft),ht=function(){var t=Object(N.b)(),e=Object(N.c)((function(t){return t.tasks})),a=Object(N.c)((function(t){return t.todolists})),n=Object(o.useCallback)((function(e,a){var n=function(t,e){return{type:"CHANGE_FILTER",payload:{value:t,todolistId:e}}}(e,a);t(n)}),[t]),c=Object(o.useCallback)((function(e){var a;t((a=e,function(t){t(g("loading")),t({type:"CHANGE_ENTITY_STATUS",payload:{id:a,entityStatus:"loading"}}),h(a).then((function(e){0===e.data.resultCode?(t(g("succeeded")),t({type:"REMOVE_TODOLIST",payload:{todoListId:a}})):(e.data.messages.length?t(S(e.data.messages[0])):t(S("Some error occurred")),t(g("failed")))}))}))}),[t]),s=Object(o.useCallback)((function(e){t(function(t){return function(e){e(g("loading")),T(t).then((function(t){0==t.data.resultCode?(e({type:"ADD_TODOLIST",payload:{todolist:t.data.data.item}}),e(g("succeeded"))):(t.data.messages.length?e(S(t.data.messages[0])):e(S("Some error occurred")),e(g("failed")))}))}}(e))}),[t]);Object(o.useEffect)((function(){t((function(t){t(g("loading")),f().then((function(e){t(g("succeeded")),t({type:"SET_TODOLISTS",payload:{todos:e.data}})}))}))}),[]);var i=Object(o.useCallback)((function(e,a){t(function(t,e){return function(a){m(t,e).then((function(n){a(function(t,e){return{type:"UPDATE_TODOLIST_TITLE",payload:{todolistId:t,title:e}}}(t,e))}))}}(e,a))}),[t]),r=Object(o.useCallback)((function(e,a){t(function(t,e){return function(a){a(g("loading")),y(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD_TASK",payload:{task:t}}}(e)),a(g("succeeded"))}else t.data.messages.length?a(S(t.data.messages[0])):a(S("Some error occurred")),a(g("failed"))}))}}(a,e))}),[t]),l=Object(o.useCallback)((function(e,a){var n,c;t((n=e,c=a,function(t){t(g("loading")),k(c,n).then((function(e){t(g("succeeded")),t(function(t,e){return{type:"REMOVE_TASK",payload:{todoListId:e,taskId:t}}}(n,c))}))}))}),[t]),d=Object(o.useCallback)((function(e,a,n){t(I(e,{status:a},n))}),[t]),u=Object(o.useCallback)((function(e,a,n){t(I(e,{title:a},n))}),[t]);return Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)(G.a,{container:!0,className:Tt.a.addItem,children:Object(tt.jsx)(et,{callback:s})}),Object(tt.jsx)(G.a,{container:!0,spacing:0,children:a.map((function(t){var a=e[t.id];return Object(tt.jsx)(G.a,{children:Object(tt.jsx)(Q.a,{elevation:0,variant:"outlined",className:Tt.a.paper,children:Object(tt.jsx)(pt,{entityStatus:t.entityStatus,id:t.id,filter:t.filter,title:t.title,tasks:a,addTask:r,removeTask:l,changeFilter:n,checkboxChange:d,removeTodoList:c,changeTaskTitle:u,changeTodoListTitle:i},t.id)})},t.id)}))})]})},mt=a(242),_t=a(239);function yt(t){return Object(tt.jsx)(_t.a,Object(j.a)({elevation:6,variant:"filled"},t))}function kt(){var t=Object(N.c)((function(t){return t.app.error})),e=Object(N.b)(),a=function(t,a){"clickaway"!==a&&e(S(null))};return Object(tt.jsx)(mt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(tt.jsx)(yt,{onClose:a,severity:"error",children:t})})}var vt=function(){var t=Object(N.c)((function(t){return t.app.status}));return Object(tt.jsxs)(s.a.Fragment,{children:[Object(tt.jsxs)(R.a,{position:"static",children:[Object(tt.jsxs)(F.a,{className:P.a.navbar,children:[Object(tt.jsx)(M.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(tt.jsx)(H.a,{})}),Object(tt.jsx)(U.a,{variant:"h6",children:"TodoShka"}),Object(tt.jsx)(K.a,{color:"inherit",children:"Login"})]}),"loading"===t&&Object(tt.jsx)(B.a,{color:"secondary"})]}),Object(tt.jsx)(V.a,{className:P.a.container,maxWidth:"xl",children:Object(tt.jsx)(ht,{})}),Object(tt.jsx)(kt,{})]})};r.a.render(Object(tt.jsx)(N.a,{store:D,children:Object(tt.jsx)(vt,{})}),document.getElementById("root"))},36:function(t,e,a){t.exports={header:"Todolist_header__P1QI6",btnsWrapper:"Todolist_btnsWrapper__s30fF",deleteBtn:"Todolist_deleteBtn__GpHnW",btn:"Todolist_btn__6WOk9",span:"Todolist_span__1ql2_"}},54:function(t,e,a){t.exports={errorMessage:"AddItem_errorMessage__1R9-_",textField:"AddItem_textField__VQDjl"}},55:function(t,e,a){t.exports={trash:"Task_trash__2YWpi",wrapper:"Task_wrapper__1bcWt",span:"Task_span__Q0klS",isDone:"Task_isDone__3dO0E"}},89:function(t,e,a){t.exports={navbar:"App_navbar__3XP-h",container:"App_container__yxLVC"}},90:function(t,e,a){t.exports={paper:"TodolistsList_paper__2p22s",addItem:"TodolistsList_addItem__3-WbB"}}},[[195,1,2]]]);
//# sourceMappingURL=main.51a5b048.chunk.js.map