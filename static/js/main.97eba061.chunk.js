(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{101:function(t,e,a){t.exports={form:"Login_form__1u3KK",btn:"Login_btn__J0HQ7"}},132:function(t,e,a){t.exports={input:"EditableSpan_input__3c1_L",span:"EditableSpan_span__1cdp9"}},135:function(t,e,a){t.exports={message:"ErrorSnackbar_message__38d7O"}},155:function(t,e,a){},218:function(t,e,a){"use strict";a.r(e);var n,c,i=a(0),o=a.n(i),s=a(11),r=a.n(s),l=(a(155),a(87)),d=a(125),u=a(8),b=a(126),j=a.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"f55312fa-da02-4f9d-ab69-743608146acf"}}),O=function(){return j.get("todo-lists")},p=function(t){return j.post("todo-lists",{title:t})},f=function(t){return j.delete("todo-lists/".concat(t))},h=function(t,e){return j.put("todo-lists/".concat(t),{title:e})},m=function(t){return j.get("todo-lists/".concat(t,"/tasks"))},T=function(t,e){return j.post("todo-lists/".concat(t,"/tasks"),{title:e})},y=function(t,e){return j.delete("todo-lists/".concat(t,"/tasks/").concat(e))},x=function(t,e,a){return j.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},g=function(t){return j.post("auth/login",t)},_=function(){return j.delete("auth/login")},v=function(){return j.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var I={status:"idle",error:null,isInitialized:!1},k=function(t){return{type:"APP/SET-STATUS",payload:{status:t}}},S=function(t){return{type:"APP/SET-ERROR",payload:{error:t}}},A=function(t,e){t.messages.length?e(S(t.messages[0])):e(S("Some error occurred")),e(k("failed"))},C=function(t,e){e(S(t.message)),e(k("failed"))},E={isLoggedIn:!1},L=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},N=a(86),D=a(35),w={},P=function(t,e,a){return function(n,c){var i=c().tasks[a].find((function(e){return e.id===t}));if(i){var o=Object(u.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},e);x(a,t,o).then((function(c){0==c.data.resultCode?n(function(t,e,a){return{type:"UPDATE_TASK",payload:{todolistId:a,taskId:t,model:e}}}(t,e,a)):A(c.data,n)})).catch((function(t){C(t,n)}))}}},F=a(269),R=(Object(F.a)(),Object(F.a)(),[]),K=Object(l.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,e.payload.tasks));case"SET_TODOLISTS":var a=Object(u.a)({},t);return e.payload.todos.forEach((function(t){a[t.id]=[]})),a;case"ADD_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(N.a)(t[e.payload.task.todoListId]))));case"REMOVE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todoListId,t[e.payload.todoListId].filter((function(t){return t.id!==e.payload.taskId}))));case"TASK/CHANGE_ENTITY_STATUS":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}))));case"UPDATE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(u.a)(Object(u.a)({},t),e.payload.model):t}))));case"ADD_TODOLIST":return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},e.payload.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(u.a)({},t);return delete n[e.payload.todoListId],n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(u.a)(Object(u.a)({},t),{},{filter:e.payload.value}):t}));case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todoListId}));case"ADD_TODOLIST":return[Object(u.a)(Object(u.a)({},e.payload.todolist),{},{filter:"All",entityStatus:"idle"})].concat(Object(N.a)(t));case"UPDATE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(u.a)(Object(u.a)({},t),{},{title:e.payload.title}):t}));case"SET_TODOLISTS":return e.payload.todos.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"All",entityStatus:"idle"})}));case"TODOLIST/CHANGE_ENTITY_STATUS":return t.map((function(t){return t.id===e.payload.id?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(u.a)(Object(u.a)({},t),{},{status:e.payload.status});case"APP/SET-ERROR":return Object(u.a)(Object(u.a)({},t),{},{error:e.payload.error});case"APP/SET-INITIALISATION":return Object(u.a)(Object(u.a)({},t),{},{isInitialized:e.payload.isInitialized});default:return Object(u.a)({},t)}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(u.a)(Object(u.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),M=Object(l.c)(K,Object(l.a)(d.a));window.store=M;var U=a(17),G=a(61),H=a.n(G),W=a(263),B=a(264),V=a(223),z=a(261),Y=a(266),q=a(265),Q=a(258),J=a(222),Z=a(53),X=a(62),$=a.n(X),tt=a(267),et=a(81),at=a.n(et),nt=a(256),ct=a(4),it=o.a.memo((function(t){var e=t.callback,a=t.disabled,n=Object(i.useState)(""),c=Object(Z.a)(n,2),o=c[0],s=c[1],r=Object(i.useState)(!1),l=Object(Z.a)(r,2),d=l[0],u=l[1],b=function(){""!==o.trim()?(e(o.trim()),s("")):u(!0)};return Object(ct.jsxs)("div",{className:$.a.wrapper,children:[Object(ct.jsx)(tt.a,{className:$.a.textField,variant:"outlined",error:d,value:o,onChange:function(t){s(t.currentTarget.value),u(!1)},onKeyPress:function(t){d&&u(!1),"Enter"===t.key&&b()},label:"Title",helperText:d,disabled:a}),Object(ct.jsx)(at.a,{color:"primary",className:$.a.btnAdd,onClick:b,disabled:a,children:Object(ct.jsx)(nt.a,{})}),d&&Object(ct.jsx)("span",{className:d?$.a.errorMessage:"",children:'"Title is required!"'})]})})),ot=a(48),st=a.n(ot),rt=a(132),lt=a.n(rt),dt=o.a.memo((function(t){var e=t.title,a=t.changeTaskTitle,n=t.className,c=t.disabled,o=Object(i.useState)(!1),s=Object(Z.a)(o,2),r=s[0],l=s[1],d=Object(i.useState)(e),u=Object(Z.a)(d,2),b=u[0],j=u[1];return r?Object(ct.jsx)(tt.a,{className:lt.a.input,autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;b&&a(e),j(e)},onBlur:function(){l(!1)},value:b,onKeyPress:function(t){"Enter"===t.key&&l(!1)},disabled:c}):Object(ct.jsx)("span",{className:n,onDoubleClick:function(){l(!0)},children:e})})),ut=a(63),bt=a.n(ut),jt=a(133),Ot=a.n(jt),pt=a(257),ft=o.a.memo((function(t){var e=t.removeTask,a=t.checkboxChange,c=t.changeTaskTitle,o=t.task,s=t.todolistId,r=t.entityStatus,l=Object(i.useCallback)((function(t){c(o.id,t,s)}),[c,o.id,s]);return Object(ct.jsx)("li",{className:o.status===n.Completed?bt.a.isDone:"",children:Object(ct.jsxs)("div",{className:bt.a.wrapper,children:[Object(ct.jsx)(Ot.a,{checked:o.status===n.Completed,onChange:function(t){a(o.id,t.currentTarget.checked?n.Completed:n.New,s)}}),Object(ct.jsx)(dt,{className:bt.a.span,changeTaskTitle:l,title:o.title,disabled:"loading"===r}),Object(ct.jsx)(at.a,{className:bt.a.trash,onClick:function(){e(o.id,s)},children:Object(ct.jsx)(pt.a,{})})]})})})),ht=a(64),mt=a.n(ht),Tt=o.a.memo((function(t){var e=t.title,a=t.tasks,c=t.removeTask,o=t.changeFilter,s=t.addTask,r=t.checkboxChange,l=t.filter,d=t.id,u=t.removeTodoList,b=t.changeTaskTitle,j=t.changeTodoListTitle,O=t.entityStatus,p=Object(U.b)(),f=Object(i.useCallback)((function(){return o("All",d)}),[o,d]),h=Object(i.useCallback)((function(){return o("Active",d)}),[o,d]),T=Object(i.useCallback)((function(){return o("Completed",d)}),[o,d]),y=Object(i.useCallback)((function(t){s(t,d)}),[s,d]),x=Object(i.useCallback)((function(t){j(d,t)}),[j,d]),g=a;return"Completed"===l&&(g=a.filter((function(t){return t.status===n.Completed}))),"Active"===l&&(g=a.filter((function(t){return t.status===n.New}))),Object(i.useEffect)((function(){var t;p((t=d,function(e){e(k("loading")),m(t).then((function(a){e(k("succeeded"));var n=a.data.items;e(function(t,e){return{type:"SET_TASKS",payload:{tasks:t,todolistId:e}}}(n,t))}))}))}),[]),Object(ct.jsxs)("div",{children:[Object(ct.jsx)("h3",{children:Object(ct.jsx)(dt,{className:st.a.span,title:e,changeTaskTitle:x,disabled:"loading"===O})}),Object(ct.jsx)(it,{callback:y,disabled:"loading"===O}),Object(ct.jsx)("div",{children:g.map((function(t){return Object(ct.jsx)(ft,{entityStatus:t.entityStatus,changeTaskTitle:b,removeTask:c,checkboxChange:r,task:t,todolistId:d},t.id)}))}),Object(ct.jsxs)("div",{className:st.a.btnsWrapper,children:[Object(ct.jsx)(mt.a,{className:st.a.btn,variant:"All"===l?"contained":"text",onClick:f,color:"secondary",children:"All"}),Object(ct.jsx)(mt.a,{className:st.a.btn,variant:"Active"===l?"contained":"text",onClick:h,color:"secondary",children:"Active"}),Object(ct.jsx)(mt.a,{className:st.a.btn,variant:"Completed"===l?"contained":"text",onClick:T,color:"secondary",children:"Completed"}),Object(ct.jsx)(mt.a,{className:st.a.deleteBtn,disabled:"loading"===O,onClick:function(){return u(d)},children:"Remove all"})]})]})})),yt=a(99),xt=a.n(yt),gt=a(14),_t=function(){var t=Object(U.b)(),e=Object(U.c)((function(t){return t.tasks})),a=Object(U.c)((function(t){return t.todolists})),n=Object(U.c)((function(t){return t.auth.isLoggedIn})),c=Object(i.useCallback)((function(e,a){var n=function(t,e){return{type:"CHANGE_FILTER",payload:{value:t,todolistId:e}}}(e,a);t(n)}),[t]),o=Object(i.useCallback)((function(e){var a;t((a=e,function(t){t(k("loading")),t({type:"TODOLIST/CHANGE_ENTITY_STATUS",payload:{id:a,entityStatus:"loading"}}),f(a).then((function(e){0===e.data.resultCode?(t(k("succeeded")),t({type:"REMOVE_TODOLIST",payload:{todoListId:a}})):A(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),s=Object(i.useCallback)((function(e){t(function(t){return function(e){e(k("loading")),p(t).then((function(t){0==t.data.resultCode?(e({type:"ADD_TODOLIST",payload:{todolist:t.data.data.item}}),e(k("succeeded"))):A(t.data,e)})).catch((function(t){C(t,e)}))}}(e))}),[t]);Object(i.useEffect)((function(){n&&t((function(t){t(k("loading")),O().then((function(e){t(k("succeeded")),t({type:"SET_TODOLISTS",payload:{todos:e.data}})})).catch((function(e){C(e,t)}))}))}),[]);var r=Object(i.useCallback)((function(e,a){t(function(t,e){return function(a){h(t,e).then((function(n){0==n.data.resultCode?a(function(t,e){return{type:"UPDATE_TODOLIST_TITLE",payload:{todolistId:t,title:e}}}(t,e)):A(n.data,a)})).catch((function(t){C(t,a)}))}}(e,a))}),[t]),l=Object(i.useCallback)((function(e,a){t(function(t,e){return function(a){a(k("loading")),T(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD_TASK",payload:{task:t}}}(e)),a(k("succeeded"))}else A(t.data,a)})).catch((function(t){C(t,a)}))}}(a,e))}),[t]),d=Object(i.useCallback)((function(e,a){var n,c;t((n=e,c=a,function(t){t(k("loading")),t(function(t,e,a){return{type:"TASK/CHANGE_ENTITY_STATUS",payload:{taskId:t,todolistId:e,entityStatus:"loading"}}}(n,c)),y(c,n).then((function(e){0==e.data.resultCode?(t(k("succeeded")),t(function(t,e){return{type:"REMOVE_TASK",payload:{todoListId:e,taskId:t}}}(n,c))):A(e.data,t)})).catch((function(e){C(e,t)}))}))}),[t]),u=Object(i.useCallback)((function(e,a,n){t(P(e,{status:a},n))}),[t]),b=Object(i.useCallback)((function(e,a,n){t(P(e,{title:a},n))}),[t]);return n?Object(ct.jsxs)(ct.Fragment,{children:[Object(ct.jsx)(Q.a,{container:!0,className:xt.a.addItem,children:Object(ct.jsx)(it,{callback:s})}),Object(ct.jsx)(Q.a,{container:!0,spacing:0,children:a.map((function(t){var a=e[t.id];return Object(ct.jsx)(Q.a,{children:Object(ct.jsx)(J.a,{elevation:0,variant:"outlined",className:xt.a.paper,children:Object(ct.jsx)(Tt,{entityStatus:t.entityStatus,id:t.id,filter:t.filter,title:t.title,tasks:a,addTask:l,removeTask:d,changeFilter:c,checkboxChange:u,removeTodoList:o,changeTaskTitle:b,changeTodoListTitle:r},t.id)})},t.id)}))})]}):Object(ct.jsx)(gt.a,{to:"/login"})},vt=a(272),It=a(268),kt=a(135),St=a.n(kt);function At(t){return Object(ct.jsx)(It.a,Object(u.a)({elevation:6,variant:"filled"},t))}function Ct(){var t=Object(U.c)((function(t){return t.app.error})),e=Object(U.b)(),a=function(t,a){"clickaway"!==a&&e(S(null))};return Object(ct.jsx)(vt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(ct.jsx)(At,{className:St.a.message,onClose:a,severity:"error",children:t})})}var Et=a(98),Lt=a(101),Nt=a.n(Lt),Dt=a(138),wt=a(273),Pt=a(255),Ft=a(259),Rt=a(260),Kt=a(270),Mt=function(){var t=Object(U.b)(),e=Object(U.c)((function(t){return t.auth.isLoggedIn})),a=Object(Dt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<=2&&(e.password="Password must be at least 2 characters long"):e.password="Required",e},onSubmit:function(e){var n;a.resetForm(),t((n=e,function(t){t(k("loading")),g(n).then((function(e){0===e.data.resultCode?(t(L(!0)),t(k("succeeded"))):A(e.data,t)})).catch((function(e){C(e,t)}))}))}});return e?Object(ct.jsx)(gt.a,{to:"/"}):Object(ct.jsx)(Q.a,{container:!0,justify:"center",children:Object(ct.jsx)(Q.a,{item:!0,xs:4,children:Object(ct.jsx)("form",{onSubmit:a.handleSubmit,className:Nt.a.form,children:Object(ct.jsxs)(wt.a,{children:[Object(ct.jsxs)(Pt.a,{children:[Object(ct.jsxs)("p",{children:["To log in get registered \xa0",Object(ct.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(ct.jsx)("p",{children:"or use common test account credentials:"}),Object(ct.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(ct.jsx)("p",{children:"Password: free"})]}),Object(ct.jsxs)(Ft.a,{children:[Object(ct.jsx)(tt.a,Object(u.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?Object(ct.jsx)("div",{style:{color:"#F55F59"},children:a.errors.email}):null,Object(ct.jsx)(tt.a,Object(u.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.email?Object(ct.jsx)("div",{style:{color:"#F55F59"},children:a.errors.password}):null,Object(ct.jsx)(Rt.a,{label:"Remember me",control:Object(ct.jsx)(Kt.a,{onChange:a.handleChange,name:"rememberMe",value:a.values.rememberMe,onBlur:a.handleBlur})}),Object(ct.jsx)(z.a,{type:"submit",className:Nt.a.btn,variant:"contained",children:"Login"})]})]})})})})},Ut=a(262);var Gt=function(){var t=Object(U.c)((function(t){return t.app.status})),e=Object(U.c)((function(t){return t.app.isInitialized})),a=Object(U.c)((function(t){return t.auth.isLoggedIn})),n=Object(U.b)();return Object(i.useEffect)((function(){n((function(t){v().then((function(e){0===e.data.resultCode&&t(L(!0))})).finally((function(){t({type:"APP/SET-INITIALISATION",payload:{isInitialized:!0}})}))}))}),[]),e?Object(ct.jsx)(o.a.Fragment,{children:Object(ct.jsxs)(Et.a,{children:[Object(ct.jsxs)(W.a,{position:"static",children:[Object(ct.jsxs)(B.a,{className:H.a.navbar,children:[Object(ct.jsx)(V.a,{variant:"h6",children:" Todolist"}),a&&Object(ct.jsx)(z.a,{className:H.a.logout,onClick:function(){n((function(t){t(k("loading")),_().then((function(e){0===e.data.resultCode?(t(L(!1)),t(k("succeeded"))):A(e.data,t)})).catch((function(e){C(e,t)}))}))},color:"inherit",children:"Log Out"})]}),"loading"===t&&Object(ct.jsx)(q.a,{className:H.a.progress,color:"secondary"})]}),Object(ct.jsx)(Y.a,{className:H.a.container,maxWidth:"xl",children:Object(ct.jsxs)(gt.d,{children:[Object(ct.jsx)(gt.b,{exact:!0,path:"/",render:function(){return Object(ct.jsx)(_t,{})}}),Object(ct.jsx)(gt.b,{exact:!0,path:"/login",render:function(){return Object(ct.jsx)(Mt,{})}}),Object(ct.jsx)(gt.b,{path:"/404",render:function(){return Object(ct.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(ct.jsx)(gt.a,{from:"*",to:"/404"})]})}),Object(ct.jsx)(Ct,{})]})}):Object(ct.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(ct.jsx)(Ut.a,{})})};r.a.render(Object(ct.jsx)(U.a,{store:M,children:Object(ct.jsx)(Gt,{})}),document.getElementById("root"))},48:function(t,e,a){t.exports={header:"Todolist_header__P1QI6",btnsWrapper:"Todolist_btnsWrapper__s30fF",deleteBtn:"Todolist_deleteBtn__GpHnW",btn:"Todolist_btn__6WOk9",span:"Todolist_span__1ql2_"}},61:function(t,e,a){t.exports={navbar:"App_navbar__3XP-h",container:"App_container__yxLVC"}},62:function(t,e,a){t.exports={errorMessage:"AddItem_errorMessage__1R9-_",textField:"AddItem_textField__VQDjl",btnAdd:"AddItem_btnAdd__3nWMo"}},63:function(t,e,a){t.exports={trash:"Task_trash__2YWpi",wrapper:"Task_wrapper__1bcWt",span:"Task_span__Q0klS",isDone:"Task_isDone__3dO0E"}},99:function(t,e,a){t.exports={paper:"TodolistsList_paper__2p22s",addItem:"TodolistsList_addItem__3-WbB"}}},[[218,1,2]]]);
//# sourceMappingURL=main.97eba061.chunk.js.map